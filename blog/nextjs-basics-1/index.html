<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 4.6.0"/><style data-href="/styles.be529b063ac792919832.css" data-identity="gatsby-global-css">.layout-module--container--eLBMS{font-family:DM Sans,sans-serif;margin:auto;max-width:500px}.layout-module--heading--8VjLO{color:#363636;margin:12px 0}.layout-module--nav-links--EROwB{display:flex;list-style:none;padding-left:0}.layout-module--nav-link-item--pfCo2{padding-right:2rem}.layout-module--nav-link-text--ac2nV{color:#363636}.layout-module--site-title--5N6mf{color:gray;font-size:3rem;font-weight:700;margin:3rem 0}.layout-module--page-layout--LahkG{margin:80px auto auto;width:800px}.NavBar-module--nav-bar--6DAkn{margin:0}.NavBar-module--nav-items--Nkmab{display:flex;gap:16px;justify-content:space-between;list-style:none;margin:0;padding:12px}.NavBar-module--nav-item--PGuQv{color:#000;font-family:Noto Sans;font-weight:700;list-style:none;text-decoration:none}.NavBar-module--nav-item--PGuQv:visited{color:#000}.NavBar-module--color-render--YK19v{-webkit-text-fill-color:transparent;background:linear-gradient(90deg,#e7a150,#e7d4a6);background-clip:text;-webkit-background-clip:text}.Footer-module--main-style--dU5ax{border-top:1px solid #ddd;padding:32px 12px}.PostItem-module--post-wrapper--1Lw2n{background-color:#fff;border:1px solid rgba(0,0,0,.12);border-radius:8px;padding:12px}.PostItem-module--post-title--S2GEs{color:#000;font-weight:700;margin:0;text-decoration:none}.PostItem-module--postTime--6bUDt{color:rgba(0,0,0,.54);font-size:12px;font-weight:400;margin:8px 0 0}.PostItem-module--post-content--CGP-V{-webkit-line-clamp:3;-webkit-box-orient:vertical;color:var(--primary-text-color);display:-webkit-box;font-size:13px;font-weight:400;line-height:20px;margin:8px 0 0;overflow:hidden;text-overflow:ellipsis}.blog-module--post-list--yKu1Z{display:flex;flex-direction:column;gap:20px}.LandingHeader-module--header-wrapper--cWFzb{margin:0}.LandingHeader-module--header-content--aj-wl{align-items:center;display:flex;flex-direction:column;justify-content:center;padding:48px 0}.LandingHeader-module--header-title--TR9KM{margin-bottom:12px;margin-top:0}.LandingHeader-module--header-line--Wz1fh{background-color:#444;height:2px;width:100px}.LandingHeader-module--self-introduce--bqwSm{align-items:center;display:flex;gap:24px;justify-content:center}.LandingHeader-module--profile-image--mLnTr{background:conic-gradient(from 90deg at 50% 125%,#1f005c,#003298,#005ac6,#007fdc,#00a2d3,#00c4ae,#00e474,#0f0,#1f005c,#003298,#005ac6,#007fdc,#00a2d3,#00c4ae,#00e474,#0f0);border-radius:50%;height:160px;width:160px}.LandingHeader-module--self-content--e318Q{color:#363636;padding:24px 0}.LandingHeader-module--self-content--e318Q h2{margin:0}.LandingHeader-module--self-content--e318Q p{font-weight:500;margin:0}.LandingHeader-module--self-content--e318Q p:last-child{font-size:16px;margin-top:8px}.LandingBody-module--bodyWrapper--8iNNV{display:flex;flex-direction:column;gap:12px;margin:48px auto auto;width:800px}.LandingBody-module--link--tQWle{text-decoration:none}.LandingBody-module--link--tQWle:visited{color:#363636}.LandingBody-module--post-wrapper--Bccww{background-color:#fff;border:1px solid rgba(0,0,0,.12);border-radius:8px;padding:12px}.LandingBody-module--post-wrapper--Bccww p{-webkit-line-clamp:3;-webkit-box-orient:vertical;display:-webkit-box;font-size:14px;font-weight:400;overflow:hidden;text-overflow:ellipsis}.LandingBody-module--post-wrapper--Bccww span{color:#888;font-size:13px;font-weight:400}@font-face{font-family:DM Sans;font-weight:400;src:url(/static/DMSans-Regular-4ee96395e07a04577aabb87e1cba8977.ttf)}@font-face{font-family:DM Sans;font-weight:500;src:url(/static/DMSans-Medium-150680530af9dd9fd00bc70926302aed.ttf)}@font-face{font-family:DM Sans;font-weight:700;src:url(/static/DMSans-Bold-c423ce2dc1d85bc50799720a8129c312.ttf)}@font-face{font-family:NotoSansKR;font-weight:400;src:url(/static/NotoSansKR-Regular-e1aa54c04a18648e6468b4229c41a26a.otf)}@font-face{font-family:NotoSansKR;font-weight:500;src:url(/static/NotoSansKR-Medium-56207b5e52841342a21b6a248c061ce7.otf)}@font-face{font-family:NotoSansKR;font-weight:700;src:url(/static/NotoSansKR-Bold-c252383c4f70753be0e73069c2233e08.otf)}@font-face{font-family:Noto Sans;font-weight:400;src:url(/static/NotoSans-Regular-dd797c0b1fb3e9b287f9f2d6c0ebe41c.ttf)}@font-face{font-family:Noto Sans;font-weight:700;src:url(/static/NotoSans-Bold-d6c5c03d5fce9c8441bcfd98c1053ed8.ttf)}body{color:#363636;font-family:DM Sans,NotoSansKR,Noto Sans;font-weight:400;margin:0}</style><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){if(void 0===e.target.dataset.mainImage)return;if(void 0===e.target.dataset.gatsbyImageSsr)return;const t=e.target;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link as="script" rel="preload" href="/webpack-runtime-6c93ebec20bd8f1a8d2b.js"/><link as="script" rel="preload" href="/framework-f24c3fbb71f117e223ab.js"/><link as="script" rel="preload" href="/app-ccf5390940d0b769b073.js"/><link as="script" rel="preload" href="/component---src-pages-blog-mdx-slug-js-7b1ec12299d8abdecdd2.js"/><link as="fetch" rel="preload" href="/page-data/blog/nextjs-basics-1/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3159585216.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><title>Next.js Basics(1)<!-- --> | <!-- -->개발자 블로그</title><nav class="NavBar-module--nav-bar--6DAkn"><ul class="NavBar-module--nav-items--Nkmab"><li><a class="NavBar-module--nav-item--PGuQv" href="/">No 개념 <span class="NavBar-module--color-render--YK19v">Research</span> Blog</a></li><li><a class="NavBar-module--nav-item--PGuQv" href="/blog">Blog</a></li></ul></nav><main class="layout-module--page-layout--LahkG"><h1 class="layout-module--heading--8VjLO">Next.js Basics(1)</h1><p>June 6, 2021</p><p>감사하게도 취업을 준비한지 1달 만에 그래도 원했던 괜찮은 회사에 프론트엔드 엔지니어로 취업을 하게되었다.</p><p>취업을 한 회사는 React, Typescript를 쓰는 회사였는데 SSR을 위해서 Next.js를 사용하고 거의 모든 코드는 Next로 쓰여있다고 CTO님이 말씀해주셨다. 그래서 나는 앞으로 2주간 Next.js에 대해서 세 단계로 나눠서 공부하기로 했다. 하루 3시간씩 Basics, Intermediate, Advanced로 구성되는 과정을 적어볼까 한다.</p><h2>Study Materials</h2><ul><li><strong>Next.js documentation(main)</strong></li><li><strong>Udemy(main)</strong></li><li>Traversy Media(Next.js Tutorial)</li><li>Medium and Blog posts</li></ul><p>공부를 할때 그리고 특히나 정리해서 Post를 할때는 될수있으면 많은 머티리얼을 참고하는 것이 좋지만 현재는 일과 공부를 병행해야하기 때문에 일단은 베이스는 Next.js문서와 udemy 영상에 두기로 했다.</p><p>먼저 공부하기 전에 간단한 웹에서의 용어를 정리하고 갈 필요가 있다.</p><h2>CSR SSR SSG</h2><p>각각은 다음의 약자이다.</p><ul><li>CSR(Client Side Rendering)</li><li>SSR(Server Side Rendering)</li><li>SSG(Static Side Generation)</li></ul><p>Render라는 영어 말은 여기서 &quot;그리다&quot;라는 뜻으로 쓰이고 의미는 그리는 것, &quot;나타냄&quot;의 의미를 가지고 있다. 따라서 프론트엔드를 얘기할때 &quot;~를 렌더한다&quot;라는 것은 &quot;~를 그린다&quot;로 이해하면 된다.</p><p>그렇다면 위의 세 가지 용어는 모두 ~ Side Rendering 또는 Generation(생성)이렇게 되어 있는데 이를 이해하기 위해서 간단하게 웹어플리케이션이 어떻게 사용자의 화면에 보여지는지(Render)되는지 알고 있어야 한다.</p><p>지금부터의 설명은 아주 간단하게 설명한 것이므로 엔지니어라면 더 깊게 이해하고 있어야 한다. (특히나 프론트엔드 엔지니어라면 더 자세히 공부해야할 것이다.)</p><h3>사용자의 화면에 웹어플리케이션이 보여지는 과정</h3><p>브라우저의 렌더링과정은 다음과 같이 몇가지 단계로 구성된다. 만약 google.com을 렌더한다고 가정한다면</p><ol><li><p>사용자는 브라우저의 주소창에 <code>www.google.com</code>를 입력한다.</p></li><li><p>먼저 브라우저는 DNS(Domain Name System)서버로 가서 도메인에 해당하는 아이피주소를 받아온 다음 해당 아이피주소(서버)로 요청(Request)을 보내게 된다.</p></li><li><p>서버에서는 응답으로 Resource를 보내주게 되는데 보통 index.html을 default로 보내주고 받아온 index.html은 사용자의 RAM에 올라간다.</p></li><li><p>브라우저는 이때부터 받아온 index.html을 파싱(parsing) 한다. (parsing이라는 용어가 생소하다면 &quot;해석하다, 해석할 수 있는 단위로 자른다&quot;로 이해하면 된다.) 아무튼 이 index.html을 파싱하는데 중요한 것은 그 결과물로 브라우저는 <code>DOM 트리</code>라는 Document Object Model 트리를 만든다는 것이다.</p><blockquote><p>DOM은 브라우저에서 굉장히 큰 역할을 하고 중요한 주제이기 때문에 이것만 공부해도 시간이 굉장히 많이 걸리기 때문에 웹에 대해서 이해하고 싶다면 DOM공부는 필수다. 이 DOM은 브라우저가 이해할 수 있는 자료구조라고 간단히 생각할 수 있다.</p></blockquote></li><li><p>DOM을 만들어가는 과정에서 link 태그와 script 태그처럼 css파일이나 js파일을 load하는 태그를 만나면 다시 서버에 이 파일들을 자동으로 요청하고 받아와서 이 파일들을 먼저 파싱한다. (이때 DOM트리를 만드는 과정은 잠시 중단된다. 참고로 CSS파일을 파싱해서 만든 자료구조는 <code>CSSOM 트리</code>라고 한다.)</p></li><li><p><code>DOM트리</code>와 <code>CSSOM트리</code>의 형성이 완료되면 그것으로 <code>렌더트리</code>라는 것을 만든다.</p></li><li><p><code>렌더트리</code>는 렌더링을 위한 트리의 자료구조다. <code>렌더트리</code>는 각 HTML 요소의 위치와 크기를 계산하는데 이것을 <code>&quot;레이아웃을 계산한다&quot;</code>고 말한다.</p></li><li><p>마지막으로 레이아웃이 계산되면 <code>paint</code>라고 하는 과정을 통해 화면에 있는 픽셀의 밝기와 색상을 조절하여 사용자의 눈에 보여지게 된다.</p></li></ol><p>위의 8가지 단계는 굉장히 간략하게 과정을 적어 놓은 것이다. <code>CSR</code>, <code>SSR</code>, <code>SSG</code>는 이 사용자 화면에 보여지는 방법들의 세 가지 방법인 것이다.</p><h2>Client Side Rendering</h2><p>CSR은 Create React App을 사용하게 될 경우 가장 기본적으로 사용자 화면에 render되는 방식이기도 하다.</p><p>이 방식은 비어있는 index.html과 엄청 큰 Javascript파일(Bundle파일)이 같이 와서 사용자의 컴퓨터에서 이 Javascript로 쓰여진 일종의 프로그램이 돌아가면서 DOM을 계속적으로 조작하고 사용자 화면에 무엇인가를 보여주는 방법이다.</p><p>이 방법은 굉장히 효율적이긴 하다. index.html 하나와 엄청 큰 Javascript파일 하나만 보내면 되기 때문이고 사용자의 컴퓨터를 render하는데 이용하기 때문에 Server의 부하를 줄일 수도 있다.</p><p>하지만 치명적인 단점이 하나 있는데 바로 처음 화면에 보여지는 것이 많이 느려질 수 있다는 것이고, 이것은 JS파일이 크면 클수록 더욱 그렇다. 또한 인터넷이 느리면 사용자의 화면에는 빈 화면만 계속 보여서 User Experience에 안좋을 수 있다. 마지막으로 <code>SEO</code>에 굉장히 취약하다.</p><h2>Server Side Rendering</h2><p>SSR방식은 서버로 요청이 들어오면 사용자 단에서 필요한 HTML파일을 서버 단에서 자료를 모으고 생성해서 보내주는 방식이다. 이 방식을 사용하면 CSR와는 다르게 첫페이지 로딩이 매우 빠르기 때문에 User Experience에 좋다.</p><p>그리고 모든 컨텐츠는 HTML문서 자체에 다 담겨있기 때문에 SEO에 취약한 CSR보다는 매우 좋다.</p><p>그러나 이후 사용자가 다른 요청(클릭, 타이핑, 등)을 할 때에 다시 서버에서 전체 html 파일을 가져와야 하기 때문에 통신이 자주 일어나야하고 이는 비효율적이다.또한 화면 이동시 화면이 깜빡이는 현상이 일어난다.</p><p>또한 사용자가 많고, 데이터 정보가 많은 서비스일 경우 서버에 부담이 커서 서버에 과부하가 걸리기 쉽다.</p><h2>Static Site Generation</h2><p>CSR 방식과 SSR에 대해서 알아보았다. 둘 모두 장단점이 명확하다. 이를 해결하기 위해서 웹개발자 선배님들이 많은 날들을 고민하고 연구와 도전을 계속적으로 한 끝에 많은 부분들이 개선이 되었고 그 방법 중 하나가 지금부터 알아볼 <code>SSG</code>방식이기도 하고 React+Next, React+Gatsby방식으로 2021현업에서 많이 쓰이고 있는 방식이다.</p><p>이 방식의 작동원리는 React로 만들어진 웹앱의 경우 Next.js나 Gatsby같은 Framework의 도움을 받아서 <strong>Server쪽에서 요청이 들어오기 전에 정적인 웹페이지를 먼저 만들어 놓는 것이다.</strong> 그리고 요청이 들어왔을때 바로 만들어 놓은 Resource들을 보내준다.</p><p>그렇기 때문에 사용자의 화면에 빨리 보이게 된다. 그리고 SSR처럼 요청이 들어오면 만드는 것이 아니기 때문에 server의 부하도 줄일 수 있다. 그러면서 이미 정적으로 html이 생성이 되어있기 때문에 CSR처럼 SEO에 취약하지도 않다.</p><p>이러한 SSG가 이 모든 것의 해결책으로 보이지만, 이런 SSG에도 단점이 존재하는데 Next.js를 사용하는 경우 현시점에서 웹사이트가 굉장히 크다면 Rebuild시 시간이 오래걸릴 수 있다는 점이고 다른 하나는 특정 UI라이브러리는 사용할 수 없다는 것이다. 이런 이유는 Server쪽에서 동작하는 node에는 DOM을 조작하기 위한 document나 window가 존재하지 않기 때문이다.</p><h2>그렇다면 어떻게 할 것인가?</h2><p>각각의 서비스에 맞게 render방식은 선택하면된다. 현재의 회사에서는 Next.js를 이용해서 <code>SSG</code>방식을 채택했다.</p><h1>처음 접하는 Next</h1><p>공부를 할때 가장 좋은 방법은 공식문서를 읽는 것이다.</p><ul><li><a href="https://nextjs.org/learn/basics/create-nextjs-app?utm_source=next-site&amp;utm_medium=homepage-cta&amp;utm_campaign=next-website">Next.js 공식문서</a></li></ul><p>Next.js에서 제공하는 몇가지 기능들을 살펴보면 다음과 같다.</p><ul><li>An intuitive page-based routing system (with support for dynamic routes)
(직관적인 페이지 기반 라우팅 시스템, 그리고 동적인 라우팅도 지원한다.)</li><li>Pre-rendering, both static generation (SSG) and server-side rendering (SSR) are supported on a per-page basis
(먼저 렌더하는 방식, SSG, SSR는 페이지 단위로 지원한다.)</li><li>Automatic code splitting for faster page loads
(빠른 페이지 불러오기를 위한 자동화된 코드 분할)</li><li>Client-side routing with optimized prefetching
(최적화된 prefetching을 통한 클라이언트 사이드 라우팅)</li><li>Built-in CSS and Sass support, and support for any CSS-in-JS library
(CSS, Sass 지원, 그리고 빌트인 CSS-in-JS 라이브러리를 지원한다.)</li><li>Development environment with Fast Refresh support
(빠른 Refresh를 지원하는 개발환경을 지원한다.)</li><li>API routes to build API endpoints with Serverless Functions
(API 엔드포인트가 있는 서버리스 함수들을 위한 API 라우트를 지원한다.)</li><li>Fully extendable
(확장가능성)</li></ul><p>다음 포스트에서는 Next.js 공식문서의 Tutorial을 직접 따라하면서 그것을 적고, Udemy강의를 들으면서 알게되는 것들을 포스팅할 것이다. Stay Tuned!!</p></main><footer class="Footer-module--main-style--dU5ax"><span>© WonjunJang. All rights reserved.</span></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/nextjs-basics-1/";window.___webpackCompilationHash="64ed2a52014683c25aed";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-3f41862614c8bf7171eb.js"],"app":["/app-ccf5390940d0b769b073.js"],"component---src-pages-404-js":["/component---src-pages-404-js-da19968e4b00979f9461.js"],"component---src-pages-about-js":["/component---src-pages-about-js-4f4b6947b653693de41f.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js-26710c064900d2b35915.js"],"component---src-pages-blog-mdx-slug-js":["/component---src-pages-blog-mdx-slug-js-7b1ec12299d8abdecdd2.js"],"component---src-pages-index-js":["/component---src-pages-index-js-6ee1ea74694cefe0b3a5.js"]};/*]]>*/</script><script src="/polyfill-3f41862614c8bf7171eb.js" nomodule=""></script><script src="/component---src-pages-blog-mdx-slug-js-7b1ec12299d8abdecdd2.js" async=""></script><script src="/app-ccf5390940d0b769b073.js" async=""></script><script src="/framework-f24c3fbb71f117e223ab.js" async=""></script><script src="/webpack-runtime-6c93ebec20bd8f1a8d2b.js" async=""></script></body></html>